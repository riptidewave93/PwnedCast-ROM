# hooks for generating /etc/resolv.conf

set_dns_props()
{
    case "${new_domain_name_servers}" in
    "")   return 0;;
    esac

    echo "# Generated by eureka dhcpcd: do not edit" > /etc/resolv.conf

    for addr in ${new_domain_name_servers}; do
        echo "nameserver" ${addr} >> /etc/resolv.conf
    done

    count=1
    for dnsaddr in ${new_domain_name_servers}; do
        echo "nameserver" ${dnsaddr} >> /etc/resolv.conf
        count=$(($count + 1))
    done
}

unset_dns_props()
{
# do nothing right now
}

case "${reason}" in
BOUND|INFORM|REBIND|REBOOT|RENEW|TIMEOUT)
    echo `date`: resolv: ${reason} >> ${state_dir}/hooks.log
    set_dns_props
    ;;
EXPIRE|FAIL|IPV4LL|RELEASE|STOP)
    echo `date`: resolv: ${reason} >> ${state_dir}/hooks.log
    unset_dns_props
    ;;
esac
